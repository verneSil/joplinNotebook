id: d4c8e2e5bb78468cb551f49eb50ddb1c
parent_id: 
item_type: 1
item_id: a2f6621b59e44f919ec60bbe79854868
item_updated_time: 1587279092309
title_diff: "@@ -0,0 +1,33 @@\n+String%E7%9A%84Intern%E6%96%B9%E6%B3%95%E8%AF%A6%E8%A7%A3 - %E7%AE%80%E5%8D%95%E7%88%B1_wxg - %E5%8D%9A%E5%AE%A2%E5%9B%AD\n"
body_diff: "@@ -0,0 +1,16440 @@\n+## %E5%BC%95%E8%A8%80%0A%0A%E3%80%80%E3%80%80%E5%9C%A8 JAVA %E8%AF%AD%E8%A8%80%E4%B8%AD%E6%9C%898%E4%B8%AD%E5%9F%BA%E6%9C%AC%E7%B1%BB%E5%9E%8B%E5%92%8C%E4%B8%80%E7%A7%8D%E6%AF%94%E8%BE%83%E7%89%B9%E6%AE%8A%E7%9A%84%E7%B1%BB%E5%9E%8B%60String%60%E3%80%82%E8%BF%99%E4%BA%9B%E7%B1%BB%E5%9E%8B%E4%B8%BA%E4%BA%86%E4%BD%BF%E4%BB%96%E4%BB%AC%E5%9C%A8%E8%BF%90%E8%A1%8C%E8%BF%87%E7%A8%8B%E4%B8%AD%E9%80%9F%E5%BA%A6%E6%9B%B4%E5%BF%AB%EF%BC%8C%E6%9B%B4%E8%8A%82%E7%9C%81%E5%86%85%E5%AD%98%EF%BC%8C%E9%83%BD%E6%8F%90%E4%BE%9B%E4%BA%86%E4%B8%80%E7%A7%8D%E5%B8%B8%E9%87%8F%E6%B1%A0%E7%9A%84%E6%A6%82%E5%BF%B5%E3%80%82%E5%B8%B8%E9%87%8F%E6%B1%A0%E5%B0%B1%E7%B1%BB%E4%BC%BC%E4%B8%80%E4%B8%AAJAVA%E7%B3%BB%E7%BB%9F%E7%BA%A7%E5%88%AB%E6%8F%90%E4%BE%9B%E7%9A%84%E7%BC%93%E5%AD%98%E3%80%828%E7%A7%8D%E5%9F%BA%E6%9C%AC%E7%B1%BB%E5%9E%8B%E7%9A%84%E5%B8%B8%E9%87%8F%E6%B1%A0%E9%83%BD%E6%98%AF%E7%B3%BB%E7%BB%9F%E5%8D%8F%E8%B0%83%E7%9A%84%EF%BC%8C%60String%60%E7%B1%BB%E5%9E%8B%E7%9A%84%E5%B8%B8%E9%87%8F%E6%B1%A0%E6%AF%94%E8%BE%83%E7%89%B9%E6%AE%8A%E3%80%82%E5%AE%83%E7%9A%84%E4%B8%BB%E8%A6%81%E4%BD%BF%E7%94%A8%E6%96%B9%E6%B3%95%E6%9C%89%E4%B8%A4%E7%A7%8D%EF%BC%9A%0A%0A- %E7%9B%B4%E6%8E%A5%E4%BD%BF%E7%94%A8%E5%8F%8C%E5%BC%95%E5%8F%B7%E5%A3%B0%E6%98%8E%E5%87%BA%E6%9D%A5%E7%9A%84%60String%60%E5%AF%B9%E8%B1%A1%E4%BC%9A%E7%9B%B4%E6%8E%A5%E5%AD%98%E5%82%A8%E5%9C%A8%E5%B8%B8%E9%87%8F%E6%B1%A0%E4%B8%AD%E3%80%82%0A- %E5%A6%82%E6%9E%9C%E4%B8%8D%E6%98%AF%E7%94%A8%E5%8F%8C%E5%BC%95%E5%8F%B7%E5%A3%B0%E6%98%8E%E7%9A%84%60String%60%E5%AF%B9%E8%B1%A1%EF%BC%8C%E5%8F%AF%E4%BB%A5%E4%BD%BF%E7%94%A8%60String%60%E6%8F%90%E4%BE%9B%E7%9A%84%60intern%60%E6%96%B9%E6%B3%95%E3%80%82intern %E6%96%B9%E6%B3%95%E4%BC%9A%E4%BB%8E%E5%AD%97%E7%AC%A6%E4%B8%B2%E5%B8%B8%E9%87%8F%E6%B1%A0%E4%B8%AD%E6%9F%A5%E8%AF%A2%E5%BD%93%E5%89%8D%E5%AD%97%E7%AC%A6%E4%B8%B2%E6%98%AF%E5%90%A6%E5%AD%98%E5%9C%A8%EF%BC%8C%E8%8B%A5%E4%B8%8D%E5%AD%98%E5%9C%A8%E5%B0%B1%E4%BC%9A%E5%B0%86%E5%BD%93%E5%89%8D%E5%AD%97%E7%AC%A6%E4%B8%B2%E6%94%BE%E5%85%A5%E5%B8%B8%E9%87%8F%E6%B1%A0%E4%B8%AD%0A%0A## %E4%B8%80. intern %E7%9A%84%E5%AE%9E%E7%8E%B0%E5%8E%9F%E7%90%86%0A%0A### 1.JAVA %E4%BB%A3%E7%A0%81%0A%0A!%5B%5D(:/44255f77217549f8987e50f4c89bbd3a)%0A%0A/** %5C* Returns a canonical representation for the string object. %0A %5C* &lt;p&gt; %0A %5C* A pool of strings, initially empty, is maintained privately by the %0A %5C* class &lt;code&gt;String&lt;/code&gt;. %0A %5C* &lt;p&gt; %0A %5C* When the intern method is invoked, if the pool already contains a %0A %5C* string equal to this &lt;code&gt;String&lt;/code&gt; object as determined by %0A %5C* the %7B@link #equals(Object)%7D method, then the string from the pool is %0A %5C* returned. Otherwise, this &lt;code&gt;String&lt;/code&gt; object is added to the %0A %5C* pool and a reference to this &lt;code&gt;String&lt;/code&gt; object is returned. %0A %5C* &lt;p&gt; %0A %5C* It follows that for any two strings &lt;code&gt;s&lt;/code&gt; and &lt;code&gt;t&lt;/code&gt;, %0A %5C* &lt;code&gt;s.intern() == t.intern()&lt;/code&gt; is &lt;code&gt;true&lt;/code&gt; %0A %5C* if and only if &lt;code&gt;s.equals(t)&lt;/code&gt; is &lt;code&gt;true&lt;/code&gt;. %0A %5C* &lt;p&gt; %0A %5C* All literal strings and string-valued constant expressions are %0A %5C* interned. String literals are defined in section 3.10.5 of the %0A %5C* &lt;cite&gt;The Java%E2%84%A2 Language Specification&lt;/cite&gt;. %0A %5C* %0A %5C* @return a string that has the same contents as this string, but is %0A %5C*          guaranteed to be from a pool of unique strings. */ %0Apublic native String intern();%0A%0AView Code%0A%0A%60%E3%80%80%E3%80%80String#intern%60%E6%96%B9%E6%B3%95%E4%B8%AD%E7%9C%8B%E5%88%B0%EF%BC%8C%E8%BF%99%E4%B8%AA%E6%96%B9%E6%B3%95%E6%98%AF%E4%B8%80%E4%B8%AA native %E7%9A%84%E6%96%B9%E6%B3%95%EF%BC%8C%E4%BD%86%E6%B3%A8%E9%87%8A%E5%86%99%E7%9A%84%E9%9D%9E%E5%B8%B8%E6%98%8E%E4%BA%86%E3%80%82%E2%80%9C%E5%A6%82%E6%9E%9C%E5%B8%B8%E9%87%8F%E6%B1%A0%E4%B8%AD%E5%AD%98%E5%9C%A8%E5%BD%93%E5%89%8D%E5%AD%97%E7%AC%A6%E4%B8%B2, %E5%B0%B1%E4%BC%9A%E7%9B%B4%E6%8E%A5%E8%BF%94%E5%9B%9E%E5%BD%93%E5%89%8D%E5%AD%97%E7%AC%A6%E4%B8%B2. %E5%A6%82%E6%9E%9C%E5%B8%B8%E9%87%8F%E6%B1%A0%E4%B8%AD%E6%B2%A1%E6%9C%89%E6%AD%A4%E5%AD%97%E7%AC%A6%E4%B8%B2, %E4%BC%9A%E5%B0%86%E6%AD%A4%E5%AD%97%E7%AC%A6%E4%B8%B2%E6%94%BE%E5%85%A5%E5%B8%B8%E9%87%8F%E6%B1%A0%E4%B8%AD%E5%90%8E, %E5%86%8D%E8%BF%94%E5%9B%9E%E2%80%9D%E3%80%82%0A%0A## 2%EF%BC%8Cnative %E4%BB%A3%E7%A0%81%0A%0A%E3%80%80%E3%80%80%E5%9C%A8 jdk7%E5%90%8E%EF%BC%8Coracle %E6%8E%A5%E7%AE%A1%E4%BA%86 JAVA %E7%9A%84%E6%BA%90%E7%A0%81%E5%90%8E%E5%B0%B1%E4%B8%8D%E5%AF%B9%E5%A4%96%E5%BC%80%E6%94%BE%E4%BA%86%EF%BC%8C%E6%A0%B9%E6%8D%AE jdk %E7%9A%84%E4%B8%BB%E8%A6%81%E5%BC%80%E5%8F%91%E4%BA%BA%E5%91%98%E5%A3%B0%E6%98%8E openJdk7 %E5%92%8C jdk7 %E4%BD%BF%E7%94%A8%E7%9A%84%E6%98%AF%E5%90%8C%E4%B8%80%E5%88%86%E4%B8%BB%E4%BB%A3%E7%A0%81%EF%BC%8C%E5%8F%AA%E6%98%AF%E5%88%86%E6%94%AF%E4%BB%A3%E7%A0%81%E4%BC%9A%E6%9C%89%E4%BA%9B%E8%AE%B8%E7%9A%84%E5%8F%98%E5%8A%A8%E3%80%82%E6%89%80%E4%BB%A5%E5%8F%AF%E4%BB%A5%E7%9B%B4%E6%8E%A5%E8%B7%9F%E8%B8%AA openJdk7 %E7%9A%84%E6%BA%90%E7%A0%81%E6%9D%A5%E6%8E%A2%E7%A9%B6 intern %E7%9A%84%E5%AE%9E%E7%8E%B0%E3%80%82%0A%0A#### native%E5%AE%9E%E7%8E%B0%E4%BB%A3%E7%A0%81:%0A%0A%5C%5Copenjdk7%5C%5Cjdk%5C%5Csrc%5C%5Cshare%5C%5Cnative%5C%5Cjava%5C%5Clang%5C%5CString.c%0A%0A%7C     %7C     %7C%0A%7C --- %7C --- %7C%0A%7C 1%3Cbr%3E%3Cbr%3E2%3Cbr%3E%3Cbr%3E3%3Cbr%3E%3Cbr%3E4 %7C %60Java_java_lang_String_intern(JNIEnv *env, jobject%60 %60this%60%60)%60%3Cbr%3E%3Cbr%3E%60%7B%60%3Cbr%3E%3Cbr%3E%60return%60 %60JVM_InternString(env,%60 %60this%60%60);%60%3Cbr%3E%3Cbr%3E%60%7D%60 %7C%0A%0A%5C%5Copenjdk7%5C%5Chotspot%5C%5Csrc%5C%5Cshare%5C%5Cvm%5C%5Cprims%5C%5Cjvm.h%0A%0A%7C     %7C     %7C%0A%7C --- %7C --- %7C%0A%7C 1%3Cbr%3E%3Cbr%3E2%3Cbr%3E%3Cbr%3E3%3Cbr%3E%3Cbr%3E4%3Cbr%3E%3Cbr%3E5 %7C %60JNIEXPORT jstring JNICALL%60%3Cbr%3E%3Cbr%3E%60JVM_InternString(JNIEnv *env, jstring str);%60 %7C%0A%0A%5C%5Copenjdk7%5C%5Chotspot%5C%5Csrc%5C%5Cshare%5C%5Cvm%5C%5Cprims%5C%5Cjvm.cpp%0A%0A%7C     %7C     %7C%0A%7C --- %7C --- %7C%0A%7C 1%3Cbr%3E%3Cbr%3E2%3Cbr%3E%3Cbr%3E3%3Cbr%3E%3Cbr%3E4%3Cbr%3E%3Cbr%3E5%3Cbr%3E%3Cbr%3E6%3Cbr%3E%3Cbr%3E7%3Cbr%3E%3Cbr%3E8%3Cbr%3E%3Cbr%3E9 %7C %60JVM_ENTRY(jstring, JVM_InternString(JNIEnv *env, jstring str))%60%3Cbr%3E%3Cbr%3E%60JVMWrapper(%60%60%22JVM_InternString%22%60%60);%60%3Cbr%3E%3Cbr%3E%60JvmtiVMObjectAllocEventCollector oam;%60%3Cbr%3E%3Cbr%3E%60if%60 %60(str == NULL)%60 %60return%60 %60NULL;%60%3Cbr%3E%3Cbr%3E%60oop string = JNIHandles::resolve_non_null(str);%60%3Cbr%3E%3Cbr%3E%60oop result = StringTable::intern(string, CHECK_NULL);%60%3Cbr%3E%3Cbr%3E%60return%60 %60(jstring) JNIHandles::make_local(env, result);%60%3Cbr%3E%3Cbr%3E%60JVM_END%60 %7C%0A%0A%5C%5Copenjdk7%5C%5Chotspot%5C%5Csrc%5C%5Cshare%5C%5Cvm%5C%5Cclassfile%5C%5CsymbolTable.cpp%0A%0A%7C     %7C     %7C%0A%7C --- %7C --- %7C%0A%7C 1%3Cbr%3E%3Cbr%3E2%3Cbr%3E%3Cbr%3E3%3Cbr%3E%3Cbr%3E4%3Cbr%3E%3Cbr%3E5%3Cbr%3E%3Cbr%3E6%3Cbr%3E%3Cbr%3E7%3Cbr%3E%3Cbr%3E8%3Cbr%3E%3Cbr%3E9%3Cbr%3E%3Cbr%3E10%3Cbr%3E%3Cbr%3E11 %7C %60oop StringTable::intern(Handle string_or_null, jchar* name,%60%3Cbr%3E%3Cbr%3E%60int%60 %60len, TRAPS) %7B%60%3Cbr%3E%3Cbr%3E%60unsigned%60 %60int%60 %60hashValue = java_lang_String::hash_string(name, len);%60%3Cbr%3E%3Cbr%3E%60int%60 %60index = the_table()-%3Ehash_to_index(hashValue);%60%3Cbr%3E%3Cbr%3E%60oop string = the_table()-%3Elookup(index, name, len, hashValue);%60%3Cbr%3E%3Cbr%3E%60if%60 %60(string != NULL)%60 %60return%60 %60string;%60%3Cbr%3E%3Cbr%3E%60return%60 %60the_table()-%3Ebasic_add(index, string_or_null, name, len,%60%3Cbr%3E%3Cbr%3E%60hashValue, CHECK_NULL);%60%3Cbr%3E%3Cbr%3E%60%7D%60 %7C%0A%0A%5C%5Copenjdk7%5C%5Chotspot%5C%5Csrc%5C%5Cshare%5C%5Cvm%5C%5Cclassfile%5C%5CsymbolTable.cpp%0A%0A%7C     %7C     %7C%0A%7C --- %7C --- %7C%0A%7C 1%3Cbr%3E%3Cbr%3E2%3Cbr%3E%3Cbr%3E3%3Cbr%3E%3Cbr%3E4%3Cbr%3E%3Cbr%3E5%3Cbr%3E%3Cbr%3E6%3Cbr%3E%3Cbr%3E7%3Cbr%3E%3Cbr%3E8%3Cbr%3E%3Cbr%3E9%3Cbr%3E%3Cbr%3E10%3Cbr%3E%3Cbr%3E11 %7C %60oop StringTable::lookup(%60%60int%60 %60index, jchar* name,%60%3Cbr%3E%3Cbr%3E%60int%60 %60len, unsigned%60 %60int%60 %60hash) %7B%60%3Cbr%3E%3Cbr%3E%60for%60 %60(HashtableEntry%3Coop%3E* l = bucket(index); l != NULL; l = l-%3Enext()) %7B%60%3Cbr%3E%3Cbr%3E%60if%60 %60(l-%3Ehash() == hash) %7B%60%3Cbr%3E%3Cbr%3E%60if%60 %60(java_lang_String::equals(l-%3Eliteral(), name, len)) %7B%60%3Cbr%3E%3Cbr%3E%60return%60 %60l-%3Eliteral();%60%3Cbr%3E%3Cbr%3E%60%7D%60%3Cbr%3E%3Cbr%3E%60%7D%60%3Cbr%3E%3Cbr%3E%60%7D%60%3Cbr%3E%3Cbr%3E%60return%60 %60NULL;%60%3Cbr%3E%3Cbr%3E%60%7D%60 %7C%0A%0A%E3%80%80%E3%80%80%E5%AE%83%E7%9A%84%E5%A4%A7%E4%BD%93%E5%AE%9E%E7%8E%B0%E7%BB%93%E6%9E%84%E5%B0%B1%E6%98%AF:JAVA %E4%BD%BF%E7%94%A8 jni %E8%B0%83%E7%94%A8c++%E5%AE%9E%E7%8E%B0%E7%9A%84%60StringTable%60%E7%9A%84%60intern%60%E6%96%B9%E6%B3%95,%C2%A0%60StringTable%60%E7%9A%84%60intern%60%E6%96%B9%E6%B3%95%E8%B7%9FJava%E4%B8%AD%E7%9A%84%60HashMap%60%E7%9A%84%E5%AE%9E%E7%8E%B0%E6%98%AF%E5%B7%AE%E4%B8%8D%E5%A4%9A%E7%9A%84, %E5%8F%AA%E6%98%AF%E4%B8%8D%E8%83%BD%E8%87%AA%E5%8A%A8%E6%89%A9%E5%AE%B9%E3%80%82%E9%BB%98%E8%AE%A4%E5%A4%A7%E5%B0%8F%E6%98%AF1009%E3%80%82%E8%A6%81%E6%B3%A8%E6%84%8F%E7%9A%84%E6%98%AF%EF%BC%8CString%E7%9A%84String Pool%E6%98%AF%E4%B8%80%E4%B8%AA%E5%9B%BA%E5%AE%9A%E5%A4%A7%E5%B0%8F%E7%9A%84%60Hashtable%60%EF%BC%8C%E9%BB%98%E8%AE%A4%E5%80%BC%E5%A4%A7%E5%B0%8F%E9%95%BF%E5%BA%A6%E6%98%AF1009%EF%BC%8C%E5%A6%82%E6%9E%9C%E6%94%BE%E8%BF%9BString Pool%E7%9A%84String%E9%9D%9E%E5%B8%B8%E5%A4%9A%EF%BC%8C%E5%B0%B1%E4%BC%9A%E9%80%A0%E6%88%90Hash%E5%86%B2%E7%AA%81%E4%B8%A5%E9%87%8D%EF%BC%8C%E4%BB%8E%E8%80%8C%E5%AF%BC%E8%87%B4%E9%93%BE%E8%A1%A8%E4%BC%9A%E5%BE%88%E9%95%BF%EF%BC%8C%E8%80%8C%E9%93%BE%E8%A1%A8%E9%95%BF%E4%BA%86%E5%90%8E%E7%9B%B4%E6%8E%A5%E4%BC%9A%E9%80%A0%E6%88%90%E7%9A%84%E5%BD%B1%E5%93%8D%E5%B0%B1%E6%98%AF%E5%BD%93%E8%B0%83%E7%94%A8%60String.intern%60%E6%97%B6%E6%80%A7%E8%83%BD%E4%BC%9A%E5%A4%A7%E5%B9%85%E4%B8%8B%E9%99%8D%E3%80%82%E5%9C%A8 jdk6%E4%B8%AD%60StringTable%60%E6%98%AF%E5%9B%BA%E5%AE%9A%E7%9A%84%EF%BC%8C%E5%B0%B1%E6%98%AF1009%E7%9A%84%E9%95%BF%E5%BA%A6%EF%BC%8C%E6%89%80%E4%BB%A5%E5%A6%82%E6%9E%9C%E5%B8%B8%E9%87%8F%E6%B1%A0%E4%B8%AD%E7%9A%84%E5%AD%97%E7%AC%A6%E4%B8%B2%E8%BF%87%E5%A4%9A%E5%B0%B1%E4%BC%9A%E5%AF%BC%E8%87%B4%E6%95%88%E7%8E%87%E4%B8%8B%E9%99%8D%E5%BE%88%E5%BF%AB%E3%80%82%E5%9C%A8jdk7%E4%B8%AD%EF%BC%8C%60StringTable%60%E7%9A%84%E9%95%BF%E5%BA%A6%E5%8F%AF%E4%BB%A5%E9%80%9A%E8%BF%87%E4%B8%80%E4%B8%AA%E5%8F%82%E6%95%B0%E6%8C%87%E5%AE%9A%EF%BC%9A%0A%0A- %60-XX:StringTableSize=99991%60%0A%0A## %E4%BA%8C.jdk6 %E5%92%8C jdk7 %E4%B8%8B intern %E7%9A%84%E5%8C%BA%E5%88%AB%0A%0A%E3%80%80%E3%80%80%E7%9B%B8%E4%BF%A1%E5%BE%88%E5%A4%9A JAVA %E7%A8%8B%E5%BA%8F%E5%91%98%E9%83%BD%E5%81%9A%E5%81%9A%E7%B1%BB%E4%BC%BC%C2%A0%60String s = new String(%22abc%22)%60%E8%BF%99%E4%B8%AA%E8%AF%AD%E5%8F%A5%E5%88%9B%E5%BB%BA%E4%BA%86%E5%87%A0%E4%B8%AA%E5%AF%B9%E8%B1%A1%E7%9A%84%E9%A2%98%E7%9B%AE%E3%80%82 %E8%BF%99%E7%A7%8D%E9%A2%98%E7%9B%AE%E4%B8%BB%E8%A6%81%E5%B0%B1%E6%98%AF%E4%B8%BA%E4%BA%86%E8%80%83%E5%AF%9F%E7%A8%8B%E5%BA%8F%E5%91%98%E5%AF%B9%E5%AD%97%E7%AC%A6%E4%B8%B2%E5%AF%B9%E8%B1%A1%E7%9A%84%E5%B8%B8%E9%87%8F%E6%B1%A0%E6%8E%8C%E6%8F%A1%E4%B8%8E%E5%90%A6%E3%80%82%E4%B8%8A%E8%BF%B0%E7%9A%84%E8%AF%AD%E5%8F%A5%E4%B8%AD%E6%98%AF%E5%88%9B%E5%BB%BA%E4%BA%862%E4%B8%AA%E5%AF%B9%E8%B1%A1%EF%BC%8C%E7%AC%AC%E4%B8%80%E4%B8%AA%E5%AF%B9%E8%B1%A1%E6%98%AF%E2%80%9Dabc%E2%80%9D%E5%AD%97%E7%AC%A6%E4%B8%B2%E5%AD%98%E5%82%A8%E5%9C%A8%E5%B8%B8%E9%87%8F%E6%B1%A0%E4%B8%AD%EF%BC%8C%E7%AC%AC%E4%BA%8C%E4%B8%AA%E5%AF%B9%E8%B1%A1%E5%9C%A8JAVA Heap%E4%B8%AD%E7%9A%84 String %E5%AF%B9%E8%B1%A1%E3%80%82%0A%0A%7C     %7C     %7C%0A%7C --- %7C --- %7C%0A%7C 1%3Cbr%3E%3Cbr%3E2%3Cbr%3E%3Cbr%3E3%3Cbr%3E%3Cbr%3E4%3Cbr%3E%3Cbr%3E5%3Cbr%3E%3Cbr%3E6%3Cbr%3E%3Cbr%3E7%3Cbr%3E%3Cbr%3E8%3Cbr%3E%3Cbr%3E9%3Cbr%3E%3Cbr%3E10%3Cbr%3E%3Cbr%3E11 %7C %60public%60 %60static%60 %60void%60 %60main(String%5B%5D args) %7B%60%3Cbr%3E%3Cbr%3E%60String s =%60 %60new%60 %60String(%60%60%221%22%60%60);%60%3Cbr%3E%3Cbr%3E%60s.intern();%60%3Cbr%3E%3Cbr%3E%60String s2 =%60 %60%221%22%60%60;%60%3Cbr%3E%3Cbr%3E%60System.out.println(s == s2);%60%3Cbr%3E%3Cbr%3E%60String s3 =%60 %60new%60 %60String(%60%60%221%22%60%60) +%60 %60new%60 %60String(%60%60%221%22%60%60);%60%3Cbr%3E%3Cbr%3E%60s3.intern();%60%3Cbr%3E%3Cbr%3E%60String s4 =%60 %60%2211%22%60%60;%60%3Cbr%3E%3Cbr%3E%60System.out.println(s3 == s4);%60%3Cbr%3E%3Cbr%3E%60%7D%60 %7C%0A%0A%E3%80%80%E3%80%80%E6%89%93%E5%8D%B0%E7%BB%93%E6%9E%9C%E6%98%AF%0A%0A- jdk6 %E4%B8%8B%60false false%60%0A- jdk7 %E4%B8%8B%60false true%60%0A%0A%E3%80%80%E3%80%80%E5%85%B7%E4%BD%93%E4%B8%BA%E4%BB%80%E4%B9%88%E7%A8%8D%E5%90%8E%E5%86%8D%E8%A7%A3%E9%87%8A%EF%BC%8C%E7%84%B6%E5%90%8E%E5%B0%86%60s3.intern();%60%E8%AF%AD%E5%8F%A5%E4%B8%8B%E8%B0%83%E4%B8%80%E8%A1%8C%EF%BC%8C%E6%94%BE%E5%88%B0%60String s4 = %2211%22;%60%E5%90%8E%E9%9D%A2%E3%80%82%E5%B0%86%60s.intern();%60%C2%A0%E6%94%BE%E5%88%B0%60String s2 = %221%22;%60%E5%90%8E%E9%9D%A2%E3%80%82%E6%98%AF%E4%BB%80%E4%B9%88%E7%BB%93%E6%9E%9C%E5%91%A2%0A%0A%7C     %7C     %7C%0A%7C --- %7C --- %7C%0A%7C 1%3Cbr%3E%3Cbr%3E2%3Cbr%3E%3Cbr%3E3%3Cbr%3E%3Cbr%3E4%3Cbr%3E%3Cbr%3E5%3Cbr%3E%3Cbr%3E6%3Cbr%3E%3Cbr%3E7%3Cbr%3E%3Cbr%3E8%3Cbr%3E%3Cbr%3E9%3Cbr%3E%3Cbr%3E10%3Cbr%3E%3Cbr%3E11 %7C %60public%60 %60static%60 %60void%60 %60main(String%5B%5D args) %7B%60%3Cbr%3E%3Cbr%3E%60String s =%60 %60new%60 %60String(%60%60%221%22%60%60);%60%3Cbr%3E%3Cbr%3E%60String s2 =%60 %60%221%22%60%60;%60%3Cbr%3E%3Cbr%3E%60s.intern();%60%3Cbr%3E%3Cbr%3E%60System.out.println(s == s2);%60%3Cbr%3E%3Cbr%3E%60String s3 =%60 %60new%60 %60String(%60%60%221%22%60%60) +%60 %60new%60 %60String(%60%60%221%22%60%60);%60%3Cbr%3E%3Cbr%3E%60String s4 =%60 %60%2211%22%60%60;%60%3Cbr%3E%3Cbr%3E%60s3.intern();%60%3Cbr%3E%3Cbr%3E%60System.out.println(s3 == s4);%60%3Cbr%3E%3Cbr%3E%60%7D%60 %7C%0A%0A%E3%80%80%E3%80%80%E6%89%93%E5%8D%B0%E7%BB%93%E6%9E%9C%E4%B8%BA%EF%BC%9A%0A%0A- jdk6 %E4%B8%8B%60false false%60%0A- jdk7 %E4%B8%8B%60false false%60%0A%0A#### 1.jdk6%E4%B8%AD%E7%9A%84%E8%A7%A3%E9%87%8A%0A%0A%3Cimg width=%22569%22 height=%22352%22 src=%22:/bec51512a99744d6820c621bcd905d8d%22/%3E%0A%0A%E3%80%80%E3%80%80%E6%B3%A8%EF%BC%9A%E5%9B%BE%E4%B8%AD%E7%BB%BF%E8%89%B2%E7%BA%BF%E6%9D%A1%E4%BB%A3%E8%A1%A8 string %E5%AF%B9%E8%B1%A1%E7%9A%84%E5%86%85%E5%AE%B9%E6%8C%87%E5%90%91%E3%80%82 %E9%BB%91%E8%89%B2%E7%BA%BF%E6%9D%A1%E4%BB%A3%E8%A1%A8%E5%9C%B0%E5%9D%80%E6%8C%87%E5%90%91%E3%80%82%0A%0A%E3%80%80%E3%80%80%E5%A6%82%E4%B8%8A%E5%9B%BE%E6%89%80%E7%A4%BA%E3%80%82%E9%A6%96%E5%85%88%E8%AF%B4%E4%B8%80%E4%B8%8B jdk6%E4%B8%AD%E7%9A%84%E6%83%85%E5%86%B5%EF%BC%8C%E5%9C%A8 jdk6%E4%B8%AD%E4%B8%8A%E8%BF%B0%E7%9A%84%E6%89%80%E6%9C%89%E6%89%93%E5%8D%B0%E9%83%BD%E6%98%AF false %E7%9A%84%EF%BC%8C%E5%9B%A0%E4%B8%BA jdk6%E4%B8%AD%E7%9A%84%E5%B8%B8%E9%87%8F%E6%B1%A0%E6%98%AF%E6%94%BE%E5%9C%A8 Perm %E5%8C%BA%E4%B8%AD%E7%9A%84%EF%BC%8CPerm%E5%8C%BA%E5%92%8C%E6%AD%A3%E5%B8%B8%E7%9A%84 JAVA Heap %E5%8C%BA%E5%9F%9F%E6%98%AF%E5%AE%8C%E5%85%A8%E5%88%86%E5%BC%80%E7%9A%84%E3%80%82%E4%B8%8A%E9%9D%A2%E8%AF%B4%E8%BF%87%E5%A6%82%E6%9E%9C%E6%98%AF%E4%BD%BF%E7%94%A8%E5%BC%95%E5%8F%B7%E5%A3%B0%E6%98%8E%E7%9A%84%E5%AD%97%E7%AC%A6%E4%B8%B2%E9%83%BD%E6%98%AF%E4%BC%9A%E7%9B%B4%E6%8E%A5%E5%9C%A8%E5%AD%97%E7%AC%A6%E4%B8%B2%E5%B8%B8%E9%87%8F%E6%B1%A0%E4%B8%AD%E7%94%9F%E6%88%90%EF%BC%8C%E8%80%8C new %E5%87%BA%E6%9D%A5%E7%9A%84 String %E5%AF%B9%E8%B1%A1%E6%98%AF%E6%94%BE%E5%9C%A8 JAVA Heap %E5%8C%BA%E5%9F%9F%E3%80%82%E6%89%80%E4%BB%A5%E6%8B%BF%E4%B8%80%E4%B8%AA JAVA Heap %E5%8C%BA%E5%9F%9F%E7%9A%84%E5%AF%B9%E8%B1%A1%E5%9C%B0%E5%9D%80%E5%92%8C%E5%AD%97%E7%AC%A6%E4%B8%B2%E5%B8%B8%E9%87%8F%E6%B1%A0%E7%9A%84%E5%AF%B9%E8%B1%A1%E5%9C%B0%E5%9D%80%E8%BF%9B%E8%A1%8C%E6%AF%94%E8%BE%83%E8%82%AF%E5%AE%9A%E6%98%AF%E4%B8%8D%E7%9B%B8%E5%90%8C%E7%9A%84%EF%BC%8C%E5%8D%B3%E4%BD%BF%E8%B0%83%E7%94%A8%60String.intern%60%E6%96%B9%E6%B3%95%E4%B9%9F%E6%98%AF%E6%B2%A1%E6%9C%89%E4%BB%BB%E4%BD%95%E5%85%B3%E7%B3%BB%E7%9A%84%E3%80%82%0A%0A#### 2.jdk7%E4%B8%AD%E7%9A%84%E8%A7%A3%E9%87%8A%0A%0A%E3%80%80%E3%80%80%E5%9C%A8 Jdk6 %E4%BB%A5%E5%8F%8A%E4%BB%A5%E5%89%8D%E7%9A%84%E7%89%88%E6%9C%AC%E4%B8%AD%EF%BC%8C%E5%AD%97%E7%AC%A6%E4%B8%B2%E7%9A%84%E5%B8%B8%E9%87%8F%E6%B1%A0%E6%98%AF%E6%94%BE%E5%9C%A8%E5%A0%86%E7%9A%84Perm%E5%8C%BA%E7%9A%84%EF%BC%8CPerm%E5%8C%BA%E6%98%AF%E4%B8%80%E4%B8%AA%E7%B1%BB%E9%9D%99%E6%80%81%E7%9A%84%E5%8C%BA%E5%9F%9F%EF%BC%8C%E4%B8%BB%E8%A6%81%E5%AD%98%E5%82%A8%E4%B8%80%E4%BA%9B%E5%8A%A0%E8%BD%BD%E7%B1%BB%E7%9A%84%E4%BF%A1%E6%81%AF%EF%BC%8C%E5%B8%B8%E9%87%8F%E6%B1%A0%EF%BC%8C%E6%96%B9%E6%B3%95%E7%89%87%E6%AE%B5%E7%AD%89%E5%86%85%E5%AE%B9%EF%BC%8C%E9%BB%98%E8%AE%A4%E5%A4%A7%E5%B0%8F%E5%8F%AA%E6%9C%894m%EF%BC%8C%E4%B8%80%E6%97%A6%E5%B8%B8%E9%87%8F%E6%B1%A0%E4%B8%AD%E5%A4%A7%E9%87%8F%E4%BD%BF%E7%94%A8 intern %E6%98%AF%E4%BC%9A%E7%9B%B4%E6%8E%A5%E4%BA%A7%E7%94%9F%60java.lang.OutOfMemoryError:PermGen space%60%E9%94%99%E8%AF%AF%E7%9A%84%E3%80%82%E5%9C%A8 jdk7 %E7%9A%84%E7%89%88%E6%9C%AC%E4%B8%AD%EF%BC%8C%E5%AD%97%E7%AC%A6%E4%B8%B2%E5%B8%B8%E9%87%8F%E6%B1%A0%E5%B7%B2%E7%BB%8F%E4%BB%8EPerm%E5%8C%BA%E7%A7%BB%E5%88%B0%E6%AD%A3%E5%B8%B8%E7%9A%84Java Heap%E5%8C%BA%E5%9F%9F%E4%BA%86%E3%80%82%E4%B8%BA%E4%BB%80%E4%B9%88%E8%A6%81%E7%A7%BB%E5%8A%A8%EF%BC%8CPerm %E5%8C%BA%E5%9F%9F%E5%A4%AA%E5%B0%8F%E6%98%AF%E4%B8%80%E4%B8%AA%E4%B8%BB%E8%A6%81%E5%8E%9F%E5%9B%A0%EF%BC%8C%E5%BD%93%E7%84%B6%E6%8D%AE%E6%B6%88%E6%81%AF%E7%A7%B0jdk8%E5%B7%B2%E7%BB%8F%E7%9B%B4%E6%8E%A5%E5%8F%96%E6%B6%88%E4%BA%86Perm%E5%8C%BA%E5%9F%9F%EF%BC%8C%E8%80%8C%E6%96%B0%E5%BB%BA%E7%AB%8B%E4%BA%86%E4%B8%80%E4%B8%AA%E5%85%83%E5%8C%BA%E5%9F%9F%E3%80%82%E5%BA%94%E8%AF%A5%E6%98%AFjdk%E5%BC%80%E5%8F%91%E8%80%85%E8%AE%A4%E4%B8%BAPerm%E5%8C%BA%E5%9F%9F%E5%B7%B2%E7%BB%8F%E4%B8%8D%E9%80%82%E5%90%88%E7%8E%B0%E5%9C%A8 JAVA %E7%9A%84%E5%8F%91%E5%B1%95%E4%BA%86%E3%80%82%E6%AD%A3%E5%BC%8F%E5%9B%A0%E4%B8%BA%E5%AD%97%E7%AC%A6%E4%B8%B2%E5%B8%B8%E9%87%8F%E6%B1%A0%E7%A7%BB%E5%8A%A8%E5%88%B0JAVA Heap%E5%8C%BA%E5%9F%9F%E5%90%8E%EF%BC%8C%E5%86%8D%E6%9D%A5%E8%A7%A3%E9%87%8A%E4%B8%BA%E4%BB%80%E4%B9%88%E4%BC%9A%E6%9C%89%E4%B8%8A%E8%BF%B0%E7%9A%84%E6%89%93%E5%8D%B0%E7%BB%93%E6%9E%9C%E3%80%82%0A%0A%3Cimg width=%22620%22 height=%22279%22 src=%22:/ee956582982646e8a699bc03978c934f%22/%3E%0A%0A- %E5%9C%A8%E7%AC%AC%E4%B8%80%E6%AE%B5%E4%BB%A3%E7%A0%81%E4%B8%AD%EF%BC%8C%E5%85%88%E7%9C%8B s3%E5%92%8Cs4%E5%AD%97%E7%AC%A6%E4%B8%B2%E3%80%82%60String s3 = new String(%221%22) + new String(%221%22);%60%EF%BC%8C%E8%BF%99%E5%8F%A5%E4%BB%A3%E7%A0%81%E4%B8%AD%E7%8E%B0%E5%9C%A8%E7%94%9F%E6%88%90%E4%BA%862%E6%9C%80%E7%BB%88%E4%B8%AA%E5%AF%B9%E8%B1%A1%EF%BC%8C%E6%98%AF%E5%AD%97%E7%AC%A6%E4%B8%B2%E5%B8%B8%E9%87%8F%E6%B1%A0%E4%B8%AD%E7%9A%84%E2%80%9C1%E2%80%9D %E5%92%8C JAVA Heap%E4%B8%AD%E7%9A%84 s3%E5%BC%95%E7%94%A8%E6%8C%87%E5%90%91%E7%9A%84%E5%AF%B9%E8%B1%A1%E3%80%82%E4%B8%AD%E9%97%B4%E8%BF%98%E6%9C%892%E4%B8%AA%E5%8C%BF%E5%90%8D%E7%9A%84%60new String(%221%22)%60%E6%88%91%E4%BB%AC%E4%B8%8D%E5%8E%BB%E8%AE%A8%E8%AE%BA%E5%AE%83%E4%BB%AC%E3%80%82%E6%AD%A4%E6%97%B6s3%E5%BC%95%E7%94%A8%E5%AF%B9%E8%B1%A1%E5%86%85%E5%AE%B9%E6%98%AF%E2%80%9D11%E2%80%B3%EF%BC%8C%E4%BD%86%E6%AD%A4%E6%97%B6%E5%B8%B8%E9%87%8F%E6%B1%A0%E4%B8%AD%E6%98%AF%E6%B2%A1%E6%9C%89 %E2%80%9C11%E2%80%9D%E5%AF%B9%E8%B1%A1%E7%9A%84%E3%80%82%0A- %E6%8E%A5%E4%B8%8B%E6%9D%A5%60s3.intern();%60%E8%BF%99%E4%B8%80%E5%8F%A5%E4%BB%A3%E7%A0%81%EF%BC%8C%E6%98%AF%E5%B0%86 s3%E4%B8%AD%E7%9A%84%2211%22%E5%AD%97%E7%AC%A6%E4%B8%B2%E6%94%BE%E5%85%A5String %E5%B8%B8%E9%87%8F%E6%B1%A0%E4%B8%AD%EF%BC%8C%E5%9B%A0%E4%B8%BA%E6%AD%A4%E6%97%B6%E5%B8%B8%E9%87%8F%E6%B1%A0%E4%B8%AD%E4%B8%8D%E5%AD%98%E5%9C%A8%2211%22%E5%AD%97%E7%AC%A6%E4%B8%B2%EF%BC%8C%E5%9B%A0%E6%AD%A4%E5%B8%B8%E8%A7%84%E5%81%9A%E6%B3%95%E6%98%AF%E8%B7%9F jdk6 %E5%9B%BE%E4%B8%AD%E8%A1%A8%E7%A4%BA%E7%9A%84%E9%82%A3%E6%A0%B7%EF%BC%8C%E5%9C%A8%E5%B8%B8%E9%87%8F%E6%B1%A0%E4%B8%AD%E7%94%9F%E6%88%90%E4%B8%80%E4%B8%AA%2211%22%E7%9A%84%E5%AF%B9%E8%B1%A1%EF%BC%8C%E5%85%B3%E9%94%AE%E7%82%B9%E6%98%AF jdk7 %E4%B8%AD%E5%B8%B8%E9%87%8F%E6%B1%A0%E4%B8%8D%E5%9C%A8Perm%E5%8C%BA%E5%9F%9F%E4%BA%86%EF%BC%8C%E8%BF%99%E5%9D%97%E5%81%9A%E4%BA%86%E8%B0%83%E6%95%B4%E3%80%82%E5%B8%B8%E9%87%8F%E6%B1%A0%E4%B8%AD%E4%B8%8D%E9%9C%80%E8%A6%81%E5%86%8D%E5%AD%98%E5%82%A8%E4%B8%80%E4%BB%BD%E5%AF%B9%E8%B1%A1%E4%BA%86%EF%BC%8C%E5%8F%AF%E4%BB%A5%E7%9B%B4%E6%8E%A5%E5%AD%98%E5%82%A8%E5%A0%86%E4%B8%AD%E7%9A%84%E5%BC%95%E7%94%A8%E3%80%82%E8%BF%99%E4%BB%BD%E5%BC%95%E7%94%A8%E6%8C%87%E5%90%91s3%E5%BC%95%E7%94%A8%E7%9A%84%E5%AF%B9%E8%B1%A1%E3%80%82 %E4%B9%9F%E5%B0%B1%E6%98%AF%E8%AF%B4%E5%BC%95%E7%94%A8%E5%9C%B0%E5%9D%80%E6%98%AF%E7%9B%B8%E5%90%8C%E7%9A%84%E3%80%82%0A- %E6%9C%80%E5%90%8E%60String s4 = %2211%22;%60%C2%A0%E8%BF%99%E5%8F%A5%E4%BB%A3%E7%A0%81%E4%B8%AD%E2%80%9D11%E2%80%B3%E6%98%AF%E6%98%BE%E7%A4%BA%E5%A3%B0%E6%98%8E%E7%9A%84%EF%BC%8C%E5%9B%A0%E6%AD%A4%E4%BC%9A%E7%9B%B4%E6%8E%A5%E5%8E%BB%E5%B8%B8%E9%87%8F%E6%B1%A0%E4%B8%AD%E5%88%9B%E5%BB%BA%EF%BC%8C%E5%88%9B%E5%BB%BA%E7%9A%84%E6%97%B6%E5%80%99%E5%8F%91%E7%8E%B0%E5%B7%B2%E7%BB%8F%E6%9C%89%E8%BF%99%E4%B8%AA%E5%AF%B9%E8%B1%A1%E4%BA%86%EF%BC%8C%E6%AD%A4%E6%97%B6%E4%B9%9F%E5%B0%B1%E6%98%AF%E6%8C%87%E5%90%91s3%E5%BC%95%E7%94%A8%E5%AF%B9%E8%B1%A1%E7%9A%84%E4%B8%80%E4%B8%AA%E5%BC%95%E7%94%A8%E3%80%82%E6%89%80%E4%BB%A5s4%E5%BC%95%E7%94%A8%E5%B0%B1%E6%8C%87%E5%90%91%E5%92%8Cs3%E4%B8%80%E6%A0%B7%E4%BA%86%E3%80%82%E5%9B%A0%E6%AD%A4%E6%9C%80%E5%90%8E%E7%9A%84%E6%AF%94%E8%BE%83%C2%A0%60s3 == s4%60%C2%A0%E6%98%AF true%E3%80%82%0A- %E5%86%8D%E7%9C%8Bs%E5%92%8C s2 %E5%AF%B9%E8%B1%A1%E3%80%82%60String s = new String(%221%22);%60%C2%A0%E7%AC%AC%E4%B8%80%E5%8F%A5%E4%BB%A3%E7%A0%81%EF%BC%8C%E7%94%9F%E6%88%90%E4%BA%862%E4%B8%AA%E5%AF%B9%E8%B1%A1%E3%80%82%E5%B8%B8%E9%87%8F%E6%B1%A0%E4%B8%AD%E7%9A%84%E2%80%9C1%E2%80%9D %E5%92%8C JAVA Heap %E4%B8%AD%E7%9A%84%E5%AD%97%E7%AC%A6%E4%B8%B2%E5%AF%B9%E8%B1%A1%E3%80%82%60s.intern();%60%C2%A0%E8%BF%99%E4%B8%80%E5%8F%A5%E6%98%AF s %E5%AF%B9%E8%B1%A1%E5%8E%BB%E5%B8%B8%E9%87%8F%E6%B1%A0%E4%B8%AD%E5%AF%BB%E6%89%BE%E5%90%8E%E5%8F%91%E7%8E%B0 %E2%80%9C1%E2%80%9D %E5%B7%B2%E7%BB%8F%E5%9C%A8%E5%B8%B8%E9%87%8F%E6%B1%A0%E9%87%8C%E4%BA%86%E3%80%82%0A- %E6%8E%A5%E4%B8%8B%E6%9D%A5%60String s2 = %221%22;%60%C2%A0%E8%BF%99%E5%8F%A5%E4%BB%A3%E7%A0%81%E6%98%AF%E7%94%9F%E6%88%90%E4%B8%80%E4%B8%AA s2%E7%9A%84%E5%BC%95%E7%94%A8%E6%8C%87%E5%90%91%E5%B8%B8%E9%87%8F%E6%B1%A0%E4%B8%AD%E7%9A%84%E2%80%9C1%E2%80%9D%E5%AF%B9%E8%B1%A1%E3%80%82 %E7%BB%93%E6%9E%9C%E5%B0%B1%E6%98%AF s %E5%92%8C s2 %E7%9A%84%E5%BC%95%E7%94%A8%E5%9C%B0%E5%9D%80%E6%98%8E%E6%98%BE%E4%B8%8D%E5%90%8C%E3%80%82%E5%9B%BE%E4%B8%AD%E7%94%BB%E7%9A%84%E5%BE%88%E6%B8%85%E6%99%B0%E3%80%82%0A%0A%3Cimg width=%22624%22 height=%22292%22 src=%22:/44c9d1f1b8e34842a7d5a9561b491bac%22/%3E%0A%0A- %E6%9D%A5%E7%9C%8B%E7%AC%AC%E4%BA%8C%E6%AE%B5%E4%BB%A3%E7%A0%81%EF%BC%8C%E4%BB%8E%E4%B8%8A%E8%BE%B9%E7%AC%AC%E4%BA%8C%E5%B9%85%E5%9B%BE%E4%B8%AD%E8%A7%82%E5%AF%9F%E3%80%82%E7%AC%AC%E4%B8%80%E6%AE%B5%E4%BB%A3%E7%A0%81%E5%92%8C%E7%AC%AC%E4%BA%8C%E6%AE%B5%E4%BB%A3%E7%A0%81%E7%9A%84%E6%94%B9%E5%8F%98%E5%B0%B1%E6%98%AF%C2%A0%60s3.intern();%60%C2%A0%E7%9A%84%E9%A1%BA%E5%BA%8F%E6%98%AF%E6%94%BE%E5%9C%A8%60String s4 = %2211%22;%60%E5%90%8E%E4%BA%86%E3%80%82%E8%BF%99%E6%A0%B7%EF%BC%8C%E9%A6%96%E5%85%88%E6%89%A7%E8%A1%8C%60String s4 = %2211%22;%60%E5%A3%B0%E6%98%8E s4 %E7%9A%84%E6%97%B6%E5%80%99%E5%B8%B8%E9%87%8F%E6%B1%A0%E4%B8%AD%E6%98%AF%E4%B8%8D%E5%AD%98%E5%9C%A8%E2%80%9C11%E2%80%9D%E5%AF%B9%E8%B1%A1%E7%9A%84%EF%BC%8C%E6%89%A7%E8%A1%8C%E5%AE%8C%E6%AF%95%E5%90%8E%EF%BC%8C%E2%80%9C11%E2%80%9C%E5%AF%B9%E8%B1%A1%E6%98%AF s4 %E5%A3%B0%E6%98%8E%E4%BA%A7%E7%94%9F%E7%9A%84%E6%96%B0%E5%AF%B9%E8%B1%A1%E3%80%82%E7%84%B6%E5%90%8E%E5%86%8D%E6%89%A7%E8%A1%8C%60s3.intern();%60%E6%97%B6%EF%BC%8C%E5%B8%B8%E9%87%8F%E6%B1%A0%E4%B8%AD%E2%80%9C11%E2%80%9D%E5%AF%B9%E8%B1%A1%E5%B7%B2%E7%BB%8F%E5%AD%98%E5%9C%A8%E4%BA%86%EF%BC%8C%E5%9B%A0%E6%AD%A4 s3 %E5%92%8C s4 %E7%9A%84%E5%BC%95%E7%94%A8%E6%98%AF%E4%B8%8D%E5%90%8C%E7%9A%84%E3%80%82%0A- %E7%AC%AC%E4%BA%8C%E6%AE%B5%E4%BB%A3%E7%A0%81%E4%B8%AD%E7%9A%84 s %E5%92%8C s2 %E4%BB%A3%E7%A0%81%E4%B8%AD%EF%BC%8C%60s.intern();%60%EF%BC%8C%E8%BF%99%E4%B8%80%E5%8F%A5%E5%BE%80%E5%90%8E%E6%94%BE%E4%B9%9F%E4%B8%8D%E4%BC%9A%E6%9C%89%E4%BB%80%E4%B9%88%E5%BD%B1%E5%93%8D%E4%BA%86%EF%BC%8C%E5%9B%A0%E4%B8%BA%E5%AF%B9%E8%B1%A1%E6%B1%A0%E4%B8%AD%E5%9C%A8%E6%89%A7%E8%A1%8C%E7%AC%AC%E4%B8%80%E5%8F%A5%E4%BB%A3%E7%A0%81%60String s = new String(%221%22);%60%E7%9A%84%E6%97%B6%E5%80%99%E5%B7%B2%E7%BB%8F%E7%94%9F%E6%88%90%E2%80%9C1%E2%80%9D%E5%AF%B9%E8%B1%A1%E4%BA%86%E3%80%82%E4%B8%8B%E8%BE%B9%E7%9A%84s2%E5%A3%B0%E6%98%8E%E9%83%BD%E6%98%AF%E7%9B%B4%E6%8E%A5%E4%BB%8E%E5%B8%B8%E9%87%8F%E6%B1%A0%E4%B8%AD%E5%8F%96%E5%9C%B0%E5%9D%80%E5%BC%95%E7%94%A8%E7%9A%84%E3%80%82 s %E5%92%8C s2 %E7%9A%84%E5%BC%95%E7%94%A8%E5%9C%B0%E5%9D%80%E6%98%AF%E4%B8%8D%E4%BC%9A%E7%9B%B8%E7%AD%89%E7%9A%84%E3%80%82%0A%0A#### %E5%B0%8F%E7%BB%93%0A%0A%E3%80%80%E3%80%80%E4%BB%8E%E4%B8%8A%E8%BF%B0%E7%9A%84%E4%BE%8B%E5%AD%90%E4%BB%A3%E7%A0%81%E5%8F%AF%E4%BB%A5%E7%9C%8B%E5%87%BA jdk7 %E7%89%88%E6%9C%AC%E5%AF%B9 intern %E6%93%8D%E4%BD%9C%E5%92%8C%E5%B8%B8%E9%87%8F%E6%B1%A0%E9%83%BD%E5%81%9A%E4%BA%86%E4%B8%80%E5%AE%9A%E7%9A%84%E4%BF%AE%E6%94%B9%E3%80%82%E4%B8%BB%E8%A6%81%E5%8C%85%E6%8B%AC2%E7%82%B9%EF%BC%9A%0A%0A- %E5%B0%86String%E5%B8%B8%E9%87%8F%E6%B1%A0%E4%BB%8EPerm%E5%8C%BA%E7%A7%BB%E5%8A%A8%E5%88%B0%E4%BA%86Java Heap%E5%8C%BA%0A- %60String#intern%60%C2%A0%E6%96%B9%E6%B3%95%E6%97%B6%EF%BC%8C%E5%A6%82%E6%9E%9C%E5%AD%98%E5%9C%A8%E5%A0%86%E4%B8%AD%E7%9A%84%E5%AF%B9%E8%B1%A1%EF%BC%8C%E4%BC%9A%E7%9B%B4%E6%8E%A5%E4%BF%9D%E5%AD%98%E5%AF%B9%E8%B1%A1%E7%9A%84%E5%BC%95%E7%94%A8%EF%BC%8C%E8%80%8C%E4%B8%8D%E4%BC%9A%E9%87%8D%E6%96%B0%E5%88%9B%E5%BB%BA%E5%AF%B9%E8%B1%A1%E3%80%82%0A%0A## %E4%B8%89.%E4%BD%BF%E7%94%A8 intern%0A%0A### 1.intern %E6%AD%A3%E7%A1%AE%E4%BD%BF%E7%94%A8%E4%BE%8B%E5%AD%90%0A%0A%E3%80%80%E3%80%80%E6%8E%A5%E4%B8%8B%E6%9D%A5%E6%88%91%E4%BB%AC%E6%9D%A5%E7%9C%8B%E4%B8%80%E4%B8%8B%E4%B8%80%E4%B8%AA%E6%AF%94%E8%BE%83%E5%B8%B8%E8%A7%81%E7%9A%84%E4%BD%BF%E7%94%A8%60String#intern%60%E6%96%B9%E6%B3%95%E7%9A%84%E4%BE%8B%E5%AD%90%E3%80%82%0A%0A%7C     %7C     %7C%0A%7C --- %7C --- %7C%0A%7C 1%3Cbr%3E%3Cbr%3E2%3Cbr%3E%3Cbr%3E3%3Cbr%3E%3Cbr%3E4%3Cbr%3E%3Cbr%3E5%3Cbr%3E%3Cbr%3E6%3Cbr%3E%3Cbr%3E7%3Cbr%3E%3Cbr%3E8%3Cbr%3E%3Cbr%3E9%3Cbr%3E%3Cbr%3E10%3Cbr%3E%3Cbr%3E11%3Cbr%3E%3Cbr%3E12%3Cbr%3E%3Cbr%3E13%3Cbr%3E%3Cbr%3E14%3Cbr%3E%3Cbr%3E15%3Cbr%3E%3Cbr%3E16%3Cbr%3E%3Cbr%3E17%3Cbr%3E%3Cbr%3E18 %7C %60static%60 %60final%60 %60int%60 %60MAX =%60 %601000%60 %60*%60 %6010000%60%60;%60%3Cbr%3E%3Cbr%3E%60static%60 %60final%60 %60String%5B%5D arr =%60 %60new%60 %60String%5BMAX%5D;%60%3Cbr%3E%3Cbr%3E%60public%60 %60static%60 %60void%60 %60main(String%5B%5D args)%60 %60throws%60 %60Exception %7B%60%3Cbr%3E%3Cbr%3E%60Integer%5B%5D DB_DATA =%60 %60new%60 %60Integer%5B%60%6010%60%60%5D;%60%3Cbr%3E%3Cbr%3E%60Random random =%60 %60new%60 %60Random(%60%6010%60 %60*%60 %6010000%60%60);%60%3Cbr%3E%3Cbr%3E%60for%60 %60(%60%60int%60 %60i =%60 %600%60%60; i %3C DB_DATA.length; i++) %7B%60%3Cbr%3E%3Cbr%3E%60DB_DATA%5Bi%5D = random.nextInt();%60%3Cbr%3E%3Cbr%3E%60%7D%60%3Cbr%3E%3Cbr%3E%60long%60 %60t = System.currentTimeMillis();%60%3Cbr%3E%3Cbr%3E%60for%60 %60(%60%60int%60 %60i =%60 %600%60%60; i %3C MAX; i++) %7B%60%3Cbr%3E%3Cbr%3E%60arr%5Bi%5D =%60 %60new%60 %60String(String.valueOf(DB_DATA%5Bi %25 DB_DATA.length%5D)).intern();%60%3Cbr%3E%3Cbr%3E%60%7D%60%3Cbr%3E%3Cbr%3E%60System.out.println((System.currentTimeMillis() - t) +%60 %60%22ms%22%60%60);%60%3Cbr%3E%3Cbr%3E%60System.gc();%60%3Cbr%3E%3Cbr%3E%60%7D%60 %7C%0A%0A%E3%80%80%E3%80%80%E8%BF%90%E8%A1%8C%E7%9A%84%E5%8F%82%E6%95%B0%E6%98%AF%EF%BC%9A%60-Xmx2g -Xms2g -Xmn1500M%60%C2%A0%E4%B8%8A%E8%BF%B0%E4%BB%A3%E7%A0%81%E6%98%AF%E4%B8%80%E4%B8%AA%E6%BC%94%E7%A4%BA%E4%BB%A3%E7%A0%81%EF%BC%8C%E5%85%B6%E4%B8%AD%E6%9C%89%E4%B8%A4%E6%9D%A1%E8%AF%AD%E5%8F%A5%E4%B8%8D%E4%B8%80%E6%A0%B7%EF%BC%8C%E4%B8%80%E6%9D%A1%E6%98%AF%E4%BD%BF%E7%94%A8 intern%EF%BC%8C%E4%B8%80%E6%9D%A1%E6%98%AF%E6%9C%AA%E4%BD%BF%E7%94%A8 intern%E3%80%82%E7%BB%93%E6%9E%9C%E5%A6%82%E4%B8%8B%E5%9B%BE%0A%0A2160ms%0A%0A%3Cimg width=%22669%22 height=%22476%22 src=%22:/9473e051eee34c13b3debe15782c966a%22/%3E%0A%0A826ms%0A%0A%3Cimg width=%22663%22 height=%22472%22 src=%22:/4c3ef73680a84e8993c9c0a7aebccbff%22/%3E%0A%0A%E3%80%80%E3%80%80%E9%80%9A%E8%BF%87%E4%B8%8A%E8%BF%B0%E7%BB%93%E6%9E%9C%EF%BC%8C%E6%88%91%E4%BB%AC%E5%8F%91%E7%8E%B0%E4%B8%8D%E4%BD%BF%E7%94%A8 intern %E7%9A%84%E4%BB%A3%E7%A0%81%E7%94%9F%E6%88%90%E4%BA%861000w %E4%B8%AA%E5%AD%97%E7%AC%A6%E4%B8%B2%EF%BC%8C%E5%8D%A0%E7%94%A8%E4%BA%86%E5%A4%A7%E7%BA%A6640m %E7%A9%BA%E9%97%B4%E3%80%82 %E4%BD%BF%E7%94%A8%E4%BA%86 intern %E7%9A%84%E4%BB%A3%E7%A0%81%E7%94%9F%E6%88%90%E4%BA%861345%E4%B8%AA%E5%AD%97%E7%AC%A6%E4%B8%B2%EF%BC%8C%E5%8D%A0%E7%94%A8%E6%80%BB%E7%A9%BA%E9%97%B4 133k %E5%B7%A6%E5%8F%B3%E3%80%82%E5%85%B6%E5%AE%9E%E9%80%9A%E8%BF%87%E8%A7%82%E5%AF%9F%E7%A8%8B%E5%BA%8F%E4%B8%AD%E5%8F%AA%E6%98%AF%E7%94%A8%E5%88%B0%E4%BA%8610%E4%B8%AA%E5%AD%97%E7%AC%A6%E4%B8%B2%EF%BC%8C%E6%89%80%E4%BB%A5%E5%87%86%E7%A1%AE%E8%AE%A1%E7%AE%97%E5%90%8E%E5%BA%94%E8%AF%A5%E6%98%AF%E6%AD%A3%E5%A5%BD%E7%9B%B8%E5%B7%AE100w %E5%80%8D%E3%80%82%E8%99%BD%E7%84%B6%E4%BE%8B%E5%AD%90%E6%9C%89%E4%BA%9B%E6%9E%81%E7%AB%AF%EF%BC%8C%E4%BD%86%E7%A1%AE%E5%AE%9E%E8%83%BD%E5%87%86%E7%A1%AE%E5%8F%8D%E5%BA%94%E5%87%BA intern %E4%BD%BF%E7%94%A8%E5%90%8E%E4%BA%A7%E7%94%9F%E7%9A%84%E5%B7%A8%E5%A4%A7%E7%A9%BA%E9%97%B4%E8%8A%82%E7%9C%81%E3%80%82%0A%0A%E7%BB%86%E5%BF%83%E7%9A%84%E5%90%8C%E5%AD%A6%E4%BC%9A%E5%8F%91%E7%8E%B0%E4%BD%BF%E7%94%A8%E4%BA%86 intern %E6%96%B9%E6%B3%95%E5%90%8E%E6%97%B6%E9%97%B4%E4%B8%8A%E6%9C%89%E4%BA%86%E4%B8%80%E4%BA%9B%E5%A2%9E%E9%95%BF%E3%80%82%E8%BF%99%E6%98%AF%E5%9B%A0%E4%B8%BA%E7%A8%8B%E5%BA%8F%E4%B8%AD%E6%AF%8F%E6%AC%A1%E9%83%BD%E6%98%AF%E7%94%A8%E4%BA%86%C2%A0%60new String%60%C2%A0%E5%90%8E%EF%BC%8C %E7%84%B6%E5%90%8E%E5%8F%88%E8%BF%9B%E8%A1%8C intern %E6%93%8D%E4%BD%9C%E7%9A%84%E8%80%97%E6%97%B6%E6%97%B6%E9%97%B4%EF%BC%8C%E8%BF%99%E4%B8%80%E7%82%B9%E5%A6%82%E6%9E%9C%E5%9C%A8%E5%86%85%E5%AD%98%E7%A9%BA%E9%97%B4%E5%85%85%E8%B6%B3%E7%9A%84%E6%83%85%E5%86%B5%E4%B8%8B%E7%A1%AE%E5%AE%9E%E6%98%AF%E6%97%A0%E6%B3%95%E9%81%BF%E5%85%8D%E7%9A%84%EF%BC%8C%E4%BD%86%E6%88%91%E4%BB%AC%E5%B9%B3%E6%97%B6%E4%BD%BF%E7%94%A8%E6%97%B6%EF%BC%8C%E5%86%85%E5%AD%98%E7%A9%BA%E9%97%B4%E8%82%AF%E5%AE%9A%E4%B8%8D%E6%98%AF%E6%97%A0%E9%99%90%E5%A4%A7%E7%9A%84%EF%BC%8C%E4%B8%8D%E4%BD%BF%E7%94%A8 intern %E5%8D%A0%E7%94%A8%E7%A9%BA%E9%97%B4%E5%AF%BC%E8%87%B4 jvm %E5%9E%83%E5%9C%BE%E5%9B%9E%E6%94%B6%E7%9A%84%E6%97%B6%E9%97%B4%E6%98%AF%E8%A6%81%E8%BF%9C%E8%BF%9C%E5%A4%A7%E4%BA%8E%E8%BF%99%E7%82%B9%E6%97%B6%E9%97%B4%E7%9A%84%E3%80%82 %E6%AF%95%E7%AB%9F%E8%BF%99%E9%87%8C%E4%BD%BF%E7%94%A8%E4%BA%861000w%E6%AC%A1intern %E6%89%8D%E5%A4%9A%E5%87%BA%E6%9D%A51%E7%A7%92%E9%92%9F%E5%A4%9A%E7%9A%84%E6%97%B6%E9%97%B4%E3%80%82%0A%0A## 2%EF%BC%8Cintern %E4%B8%8D%E5%BD%93%E4%BD%BF%E7%94%A8%0A%0A%E3%80%80%E3%80%80%E7%9C%8B%E8%BF%87%E4%BA%86 intern %E7%9A%84%E4%BD%BF%E7%94%A8%E5%92%8C intern %E7%9A%84%E5%8E%9F%E7%90%86%E7%AD%89%EF%BC%8C%E6%88%91%E4%BB%AC%E6%9D%A5%E7%9C%8B%E4%B8%80%E4%B8%AA%E4%B8%8D%E5%BD%93%E4%BD%BF%E7%94%A8 intern %E6%93%8D%E4%BD%9C%E5%AF%BC%E8%87%B4%E7%9A%84%E9%97%AE%E9%A2%98%E3%80%82%0A%0A%E3%80%80%E3%80%80%E5%9C%A8%E4%BD%BF%E7%94%A8 fastjson %E8%BF%9B%E8%A1%8C%E6%8E%A5%E5%8F%A3%E8%AF%BB%E5%8F%96%E7%9A%84%E6%97%B6%E5%80%99%EF%BC%8C%E6%88%91%E4%BB%AC%E5%8F%91%E7%8E%B0%E5%9C%A8%E8%AF%BB%E5%8F%96%E4%BA%86%E8%BF%9170w%E6%9D%A1%E6%95%B0%E6%8D%AE%E5%90%8E%EF%BC%8C%E6%88%91%E4%BB%AC%E7%9A%84%E6%97%A5%E5%BF%97%E6%89%93%E5%8D%B0%E5%8F%98%E7%9A%84%E9%9D%9E%E5%B8%B8%E7%BC%93%E6%85%A2%EF%BC%8C%E6%AF%8F%E6%89%93%E5%8D%B0%E4%B8%80%E6%AC%A1%E6%97%A5%E5%BF%97%E7%94%A8%E6%97%B630ms%E5%B7%A6%E5%8F%B3%EF%BC%8C%E5%A6%82%E6%9E%9C%E5%9C%A8%E4%B8%80%E4%B8%AA%E8%AF%B7%E6%B1%82%E4%B8%AD%E6%89%93%E5%8D%B02%E5%88%B03%E6%9D%A1%E6%97%A5 %E5%BF%97%E4%BB%A5%E4%B8%8A%E4%BC%9A%E5%8F%91%E7%8E%B0%E8%AF%B7%E6%B1%82%E6%9C%89%E4%B8%80%E5%80%8D%E4%BB%A5%E4%B8%8A%E7%9A%84%E8%80%97%E6%97%B6%E3%80%82%E5%9C%A8%E9%87%8D%E6%96%B0%E5%90%AF%E5%8A%A8 jvm %E5%90%8E%E9%97%AE%E9%A2%98%E6%B6%88%E5%A4%B1%E3%80%82%E7%BB%A7%E7%BB%AD%E8%AF%BB%E5%8F%96%E6%8E%A5%E5%8F%A3%E5%90%8E%EF%BC%8C%E9%97%AE%E9%A2%98%E5%8F%88%E9%87%8D%E7%8E%B0%E3%80%82%E6%8E%A5%E4%B8%8B%E6%9D%A5%E6%88%91%E4%BB%AC%E7%9C%8B%E4%B8%80%E4%B8%8B%E5%87%BA%E7%8E%B0%E9%97%AE%E9%A2%98%E7%9A%84%E8%BF%87%E7%A8%8B%E3%80%82%0A%0A#### 1%EF%BC%8C%E6%A0%B9%E6%8D%AE log4j %E6%89%93%E5%8D%B0%E6%97%A5%E5%BF%97%E6%9F%A5%E6%89%BE%E9%97%AE%E9%A2%98%E5%8E%9F%E5%9B%A0%0A%0A%E5%9C%A8%E4%BD%BF%E7%94%A8%60log4j#info%60%E6%89%93%E5%8D%B0%E6%97%A5%E5%BF%97%E7%9A%84%E6%97%B6%E5%80%99%E6%97%B6%E9%97%B4%E9%9D%9E%E5%B8%B8%E9%95%BF%E3%80%82%E6%89%80%E4%BB%A5%E4%BD%BF%E7%94%A8 housemd %E8%BD%AF%E4%BB%B6%E8%B7%9F%E8%B8%AA info %E6%96%B9%E6%B3%95%E7%9A%84%E8%80%97%E6%97%B6%E5%A0%86%E6%A0%88%E3%80%82%0A%0A- trace SLF4JLogger.%0A- trace AbstractLoggerWrapper:%0A- trace AsyncLogger%0A%0A%7C     %7C     %7C%0A%7C --- %7C --- %7C%0A%7C 1%3Cbr%3E%3Cbr%3E2%3Cbr%3E%3Cbr%3E3 %7C %60org/apache/logging/log4j/core/async/AsyncLogger.actualAsyncLog(RingBufferLogEvent)%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0 sun.misc.Launcher$AppClassLoader%60%60@109aca82%60%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0 %601%60%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0 %601ms%C2%A0%C2%A0%C2%A0 org.apache.logging.log4j.core.async.AsyncLogger%60%60@19de86bb%60%C2%A0%3Cbr%3E%3Cbr%3E%60org/apache/logging/log4j/core/async/AsyncLogger.location(String)%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0 sun.misc.Launcher$AppClassLoader%60%60@109aca82%60%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0 %601%60%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0 %6030ms%C2%A0%C2%A0%C2%A0 org.apache.logging.log4j.core.async.AsyncLogger%60%60@19de86bb%60%C2%A0%3Cbr%3E%3Cbr%3E%60org/apache/logging/log4j/core/async/AsyncLogger.log(Marker, String, Level, Message, Throwable)%C2%A0%C2%A0%C2%A0 sun.misc.Launcher$AppClassLoader%60%60@109aca82%60%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0 %601%60%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0 %6061ms%C2%A0%C2%A0%C2%A0 org.apache.logging.log4j.core.async.AsyncLogger%60%60@19de86bb%60 %7C%0A%0A%E4%BB%A3%E7%A0%81%E5%87%BA%E5%9C%A8%C2%A0%60AsyncLogger.location%60%C2%A0%E8%BF%99%E4%B8%AA%E6%96%B9%E6%B3%95%E4%B8%8A. %E9%87%8C%E8%BE%B9%E4%B8%BB%E8%A6%81%E6%98%AF%E8%B0%83%E7%94%A8%E4%BA%86%C2%A0%60return Log4jLogEvent.calcLocation(fqcnOfLogger);%60%E5%92%8C%60Log4jLogEvent.calcLocation()%60%0A%0A%60Log4jLogEvent.calcLocation()%60%E7%9A%84%E4%BB%A3%E7%A0%81%E5%A6%82%E4%B8%8B:%0A%0A%7C     %7C     %7C%0A%7C --- %7C --- %7C%0A%7C 1%3Cbr%3E%3Cbr%3E2%3Cbr%3E%3Cbr%3E3%3Cbr%3E%3Cbr%3E4%3Cbr%3E%3Cbr%3E5%3Cbr%3E%3Cbr%3E6%3Cbr%3E%3Cbr%3E7%3Cbr%3E%3Cbr%3E8%3Cbr%3E%3Cbr%3E9%3Cbr%3E%3Cbr%3E10%3Cbr%3E%3Cbr%3E11%3Cbr%3E%3Cbr%3E12%3Cbr%3E%3Cbr%3E13%3Cbr%3E%3Cbr%3E14%3Cbr%3E%3Cbr%3E15%3Cbr%3E%3Cbr%3E16%3Cbr%3E%3Cbr%3E17%3Cbr%3E%3Cbr%3E18%3Cbr%3E%3Cbr%3E19%3Cbr%3E%3Cbr%3E20%3Cbr%3E%3Cbr%3E21%3Cbr%3E%3Cbr%3E22 %7C %60public%60 %60static%60 %60StackTraceElement calcLocation(%60%60final%60 %60String fqcnOfLogger) %7B%C2%A0%60%3Cbr%3E%3Cbr%3E%60if%60 %60(fqcnOfLogger ==%60 %60null%60%60) %7B%C2%A0%60%3Cbr%3E%3Cbr%3E%60return%60 %60null%60%60;%C2%A0%60%3Cbr%3E%3Cbr%3E%60%7D%C2%A0%60%3Cbr%3E%3Cbr%3E%60final%60 %60StackTraceElement%5B%5D stackTrace = Thread.currentThread().getStackTrace();%C2%A0%60%3Cbr%3E%3Cbr%3E%60boolean%60 %60next =%60 %60false%60%60;%C2%A0%60%3Cbr%3E%3Cbr%3E%60for%60 %60(%60%60final%60 %60StackTraceElement element : stackTrace) %7B%C2%A0%60%3Cbr%3E%3Cbr%3E%60final%60 %60String className = element.getClassName();%C2%A0%60%3Cbr%3E%3Cbr%3E%60if%60 %60(next) %7B%C2%A0%60%3Cbr%3E%3Cbr%3E%60if%60 %60(fqcnOfLogger.equals(className)) %7B%C2%A0%60%3Cbr%3E%3Cbr%3E%60continue%60%60;%C2%A0%60%3Cbr%3E%3Cbr%3E%60%7D%C2%A0%60%3Cbr%3E%3Cbr%3E%60return%60 %60element;%C2%A0%60%3Cbr%3E%3Cbr%3E%60%7D%C2%A0%60%3Cbr%3E%3Cbr%3E%60if%60 %60(fqcnOfLogger.equals(className)) %7B%C2%A0%60%3Cbr%3E%3Cbr%3E%60next =%60 %60true%60%60;%C2%A0%60%3Cbr%3E%3Cbr%3E%60%7D%60 %60else%60 %60if%60 %60(NOT_AVAIL.equals(className)) %7B%C2%A0%60%3Cbr%3E%3Cbr%3E%60break%60%60;%C2%A0%60%3Cbr%3E%3Cbr%3E%60%7D%C2%A0%60%3Cbr%3E%3Cbr%3E%60%7D%C2%A0%60%3Cbr%3E%3Cbr%3E%60return%60 %60null%60%60;%C2%A0%60%3Cbr%3E%3Cbr%3E%60%7D%60 %7C%0A%0A%E3%80%80%E3%80%80%E7%BB%8F%E8%BF%87%E8%B7%9F%E8%B8%AA%E5%8F%91%E7%8E%B0%E6%98%AF%C2%A0%60Thread.currentThread().getStackTrace();%60%C2%A0%E7%9A%84%E9%97%AE%E9%A2%98%E3%80%82%0A%0A#### 2, %E8%B7%9F%E8%B8%AAThread.currentThread().getStackTrace()%E7%9A%84 native %E4%BB%A3%E7%A0%81%EF%BC%8C%E9%AA%8C%E8%AF%81String#intern%0A%0A%60%E3%80%80%E3%80%80Thread.currentThread().getStackTrace();%60native%E7%9A%84%E6%96%B9%E6%B3%95:%0A%0A%7C     %7C     %7C%0A%7C --- %7C --- %7C%0A%7C 1%3Cbr%3E%3Cbr%3E2%3Cbr%3E%3Cbr%3E3%3Cbr%3E%3Cbr%3E4%3Cbr%3E%3Cbr%3E5%3Cbr%3E%3Cbr%3E6%3Cbr%3E%3Cbr%3E7%3Cbr%3E%3Cbr%3E8%3Cbr%3E%3Cbr%3E9%3Cbr%3E%3Cbr%3E10%3Cbr%3E%3Cbr%3E11%3Cbr%3E%3Cbr%3E12%3Cbr%3E%3Cbr%3E13%3Cbr%3E%3Cbr%3E14%3Cbr%3E%3Cbr%3E15%3Cbr%3E%3Cbr%3E16%3Cbr%3E%3Cbr%3E17%3Cbr%3E%3Cbr%3E18%3Cbr%3E%3Cbr%3E19%3Cbr%3E%3Cbr%3E20%3Cbr%3E%3Cbr%3E21%3Cbr%3E%3Cbr%3E22%3Cbr%3E%3Cbr%3E23%3Cbr%3E%3Cbr%3E24%3Cbr%3E%3Cbr%3E25 %7C %60public%60 %60StackTraceElement%5B%5D getStackTrace() %7B%C2%A0%60%3Cbr%3E%3Cbr%3E%60if%60 %60(%60%60this%60 %60!= Thread.currentThread()) %7B%C2%A0%60%3Cbr%3E%3Cbr%3E%60SecurityManager security = System.getSecurityManager();%C2%A0%60%3Cbr%3E%3Cbr%3E%60if%60 %60(security !=%60 %60null%60%60) %7B%C2%A0%60%3Cbr%3E%3Cbr%3E%60security.checkPermission(%C2%A0%60%3Cbr%3E%3Cbr%3E%60SecurityConstants.GET_STACK_TRACE_PERMISSION);%C2%A0%60%3Cbr%3E%3Cbr%3E%60%7D%C2%A0%60%3Cbr%3E%3Cbr%3E%60if%60 %60(!isAlive()) %7B%C2%A0%60%3Cbr%3E%3Cbr%3E%60return%60 %60EMPTY_STACK_TRACE;%C2%A0%60%3Cbr%3E%3Cbr%3E%60%7D%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0 StackTraceElement%5B%5D%5B%5D stackTraceArray = dumpThreads(%60%60new%60 %60Thread%5B%5D %7B%60%60this%60%60%7D);%C2%A0%60%3Cbr%3E%3Cbr%3E%60StackTraceElement%5B%5D stackTrace = stackTraceArray%5B%60%600%60%60%5D;%C2%A0%60%3Cbr%3E%3Cbr%3E%60if%60 %60(stackTrace ==%60 %60null%60%60) %7B%C2%A0%60%3Cbr%3E%3Cbr%3E%60stackTrace = EMPTY_STACK_TRACE;%C2%A0%60%3Cbr%3E%3Cbr%3E%60%7D%C2%A0%60%3Cbr%3E%3Cbr%3E%60return%60 %60stackTrace;%C2%A0%60%3Cbr%3E%3Cbr%3E%60%7D%60 %60else%60 %60%7B%C2%A0%60%3Cbr%3E%3Cbr%3E%60return%60 %60(%60%60new%60 %60Exception()).getStackTrace();%C2%A0%60%3Cbr%3E%3Cbr%3E%60%7D%C2%A0%60%3Cbr%3E%3Cbr%3E%60%7D%60 %7C%0A%0A&lt;code&gt;private native static StackTraceElement%5C%5B%5C%5D%5C%5B%5C%5D dumpThreads(Thread%5C%5B%5C%5D threads);&lt;/code&gt;%0A%0A%E4%B8%8B%E8%BD%BD openJdk7%E7%9A%84%E6%BA%90%E7%A0%81%E6%9F%A5%E8%AF%A2 jdk %E7%9A%84 native %E5%AE%9E%E7%8E%B0%E4%BB%A3%E7%A0%81%EF%BC%8C%E5%88%97%E8%A1%A8%E5%A6%82%E4%B8%8B%E3%80%90%E8%BF%99%E9%87%8C%E5%9B%A0%E4%B8%BA%E7%AF%87%E5%B9%85%E9%97%AE%E9%A2%98%EF%BC%8C%E4%B8%8D%E8%AF%A6%E7%BB%86%E7%BD%97%E5%88%97%E6%B6%89%E5%8F%8A%E5%88%B0%E7%9A%84%E4%BB%A3%E7%A0%81%EF%BC%8C%E6%9C%89%E5%85%B4%E8%B6%A3%E7%9A%84%E5%8F%AF%E4%BB%A5%E6%A0%B9%E6%8D%AE%E6%96%87%E4%BB%B6%E5%90%8D%E7%A7%B0%E5%92%8C%E8%A1%8C%E5%8F%B7%E6%9F%A5%E6%89%BE%E7%9B%B8%E5%85%B3%E4%BB%A3%E7%A0%81%E3%80%91%EF%BC%9A%0A%0A%5C%5Copenjdk7%5C%5Cjdk%5C%5Csrc%5C%5Cshare%5C%5Cnative%5C%5Cjava%5C%5Clang%5C%5CThread.c  %0A%5C%5Copenjdk7%5C%5Chotspot%5C%5Csrc%5C%5Cshare%5C%5Cvm%5C%5Cprims%5C%5Cjvm.h line:294:  %0A%5C%5Copenjdk7%5C%5Chotspot%5C%5Csrc%5C%5Cshare%5C%5Cvm%5C%5Cprims%5C%5Cjvm.cpp line:4382-4414:  %0A%5C%5Copenjdk7%5C%5Chotspot%5C%5Csrc%5C%5Cshare%5C%5Cvm%5C%5Cservices%5C%5CthreadService.cpp line:235-267:  %0A%5C%5Copenjdk7%5C%5Chotspot%5C%5Csrc%5C%5Cshare%5C%5Cvm%5C%5Cservices%5C%5CthreadService.cpp line:566-577:  %0A%5C%5Copenjdk7%5C%5Chotspot%5C%5Csrc%5C%5Cshare%5C%5Cvm%5C%5Cclassfile%5C%5CjavaClasses.cpp line:1635-%5C%5B1651,1654,1658%5C%5D:%0A%0A%E5%AE%8C%E6%88%90%E8%B7%9F%E8%B8%AA%E4%BA%86%E5%BA%95%E5%B1%82%E7%9A%84 jvm %E6%BA%90%E7%A0%81%E5%90%8E%E5%8F%91%E7%8E%B0%EF%BC%8C%E6%98%AF%E4%B8%8B%E8%BE%B9%E7%9A%84%E4%B8%89%E6%9D%A1%E4%BB%A3%E7%A0%81%E5%BC%95%E5%8F%91%E4%BA%86%E6%95%B4%E4%B8%AA%E7%A8%8B%E5%BA%8F%E7%9A%84%E5%8F%98%E6%85%A2%E9%97%AE%E9%A2%98%E3%80%82%0A%0A%7C     %7C     %7C%0A%7C --- %7C --- %7C%0A%7C 1%3Cbr%3E%3Cbr%3E2%3Cbr%3E%3Cbr%3E3 %7C %60oop classname = StringTable::intern((%60%60char%60%60*) str, CHECK_0);%C2%A0%60%3Cbr%3E%3Cbr%3E%60oop methodname = StringTable::intern(method-%3Ename(), CHECK_0);%C2%A0%60%3Cbr%3E%3Cbr%3E%60oop filename = StringTable::intern(source, CHECK_0);%60 %7C%0A%0A%E8%BF%99%E4%B8%89%E6%AE%B5%E4%BB%A3%E7%A0%81%E6%98%AF%E8%8E%B7%E5%8F%96%E7%B1%BB%E5%90%8D%E3%80%81%E6%96%B9%E6%B3%95%E5%90%8D%E3%80%81%E5%92%8C%E6%96%87%E4%BB%B6%E5%90%8D%E3%80%82%E5%9B%A0%E4%B8%BA%E7%B1%BB%E5%90%8D%E3%80%81%E6%96%B9%E6%B3%95%E5%90%8D%E3%80%81%E6%96%87%E4%BB%B6%E5%90%8D%E9%83%BD%E6%98%AF%E5%AD%98%E5%82%A8%E5%9C%A8%E5%AD%97%E7%AC%A6%E4%B8%B2%E5%B8%B8%E9%87%8F%E6%B1%A0%E4%B8%AD%E7%9A%84%EF%BC%8C%E6%89%80%E4%BB%A5%E6%AF%8F%E6%AC%A1%E8%8E%B7%E5%8F%96%E5%AE%83%E4%BB%AC%E9%83%BD%E6%98%AF%E9%80%9A%E8%BF%87%60String#intern%60%E6%96%B9%E6%B3%95%E3%80%82%E4%BD%86%E6%B2%A1%E6%9C%89%E8%80%83%E8%99%91%E5%88%B0%E7%9A%84%E6%98%AF%E9%BB%98%E8%AE%A4%E7%9A%84 StringPool %E7%9A%84%E9%95%BF%E5%BA%A6%E6%98%AF1009%E4%B8%94%E4%B8%8D%E5%8F%AF%E5%8F%98%E7%9A%84%E3%80%82%E5%9B%A0%E6%AD%A4%E4%B8%80%E6%97%A6%E5%B8%B8%E9%87%8F%E6%B1%A0%E4%B8%AD%E7%9A%84%E5%AD%97%E7%AC%A6%E4%B8%B2%E8%BE%BE%E5%88%B0%E7%9A%84%E4%B8%80%E5%AE%9A%E7%9A%84%E8%A7%84%E6%A8%A1%E5%90%8E%EF%BC%8C%E6%80%A7%E8%83%BD%E4%BC%9A%E6%80%A5%E5%89%A7%E4%B8%8B%E9%99%8D%E3%80%82%0A%0A#### 3,fastjson %E4%B8%8D%E5%BD%93%E4%BD%BF%E7%94%A8 String#intern%0A%0A%E5%AF%BC%E8%87%B4%E8%BF%99%E4%B8%AA intern %E5%8F%98%E6%85%A2%E7%9A%84%E5%8E%9F%E5%9B%A0%E6%98%AF%E5%9B%A0%E4%B8%BA fastjson %E5%AF%B9%60String#intern%60%E6%96%B9%E6%B3%95%E7%9A%84%E4%BD%BF%E7%94%A8%E4%B8%8D%E5%BD%93%E9%80%A0%E6%88%90%E7%9A%84%E3%80%82%E8%B7%9F%E8%B8%AA fastjson %E4%B8%AD%E7%9A%84%E5%AE%9E%E7%8E%B0%E4%BB%A3%E7%A0%81%E5%8F%91%E7%8E%B0%EF%BC%8C%0A%0A#### %60com.alibaba.fastjson.parser.JSONScanner#scanFieldSymbol()%EF%BC%9A%60%0A%0A%7C     %7C     %7C%0A%7C --- %7C --- %7C%0A%7C 1%3Cbr%3E%3Cbr%3E2%3Cbr%3E%3Cbr%3E3%3Cbr%3E%3Cbr%3E4%3Cbr%3E%3Cbr%3E5%3Cbr%3E%3Cbr%3E6 %7C %60if%60 %60(ch ==%60 %60'%5C%22'%60%60) %7B%60%3Cbr%3E%3Cbr%3E%60bp = index;%60%3Cbr%3E%3Cbr%3E%60this%60%60.ch = ch = buf%5Bbp%5D;%60%3Cbr%3E%3Cbr%3E%60strVal = symbolTable.addSymbol(buf, start, index - start -%60 %601%60%60, hash);%60%3Cbr%3E%3Cbr%3E%60break%60%60;%60%3Cbr%3E%3Cbr%3E%60%7D%60 %7C%0A%0A#### %60com.alibaba.fastjson.parser.SymbolTable#addSymbol()%60:%0A%0A%7C     %7C     %7C%0A%7C --- %7C --- %7C%0A%7C 1%3Cbr%3E%3Cbr%3E2%3Cbr%3E%3Cbr%3E3%3Cbr%3E%3Cbr%3E4%3Cbr%3E%3Cbr%3E5%3Cbr%3E%3Cbr%3E6%3Cbr%3E%3Cbr%3E7%3Cbr%3E%3Cbr%3E8%3Cbr%3E%3Cbr%3E9%3Cbr%3E%3Cbr%3E10%3Cbr%3E%3Cbr%3E11 %7C %60/**%60%3Cbr%3E%3Cbr%3E%60* Constructs a new entry from the specified symbol information and next entry reference.%60%3Cbr%3E%3Cbr%3E%60*/%60%3Cbr%3E%3Cbr%3E%60public%60 %60Entry(%60%60char%60%60%5B%5D ch,%60 %60int%60 %60offset,%60 %60int%60 %60length,%60 %60int%60 %60hash, Entry next)%7B%60%3Cbr%3E%3Cbr%3E%60characters =%60 %60new%60 %60char%60%60%5Blength%5D;%60%3Cbr%3E%3Cbr%3E%60System.arraycopy(ch, offset, characters,%60 %600%60%60, length);%60%3Cbr%3E%3Cbr%3E%60symbol =%60 %60new%60 %60String(characters).intern();%60%3Cbr%3E%3Cbr%3E%60this%60%60.next = next;%60%3Cbr%3E%3Cbr%3E%60this%60%60.hashCode = hash;%60%3Cbr%3E%3Cbr%3E%60this%60%60.bytes =%60 %60null%60%60;%60%3Cbr%3E%3Cbr%3E%60%7D%60 %7C%0A%0Afastjson %E4%B8%AD%E5%AF%B9%E6%89%80%E6%9C%89%E7%9A%84 json %E7%9A%84 key %E4%BD%BF%E7%94%A8%E4%BA%86 intern %E6%96%B9%E6%B3%95%EF%BC%8C%E7%BC%93%E5%AD%98%E5%88%B0%E4%BA%86%E5%AD%97%E7%AC%A6%E4%B8%B2%E5%B8%B8%E9%87%8F%E6%B1%A0%E4%B8%AD%EF%BC%8C%E8%BF%99%E6%A0%B7%E6%AF%8F%E6%AC%A1%E8%AF%BB%E5%8F%96%E7%9A%84%E6%97%B6%E5%80%99%E5%B0%B1%E4%BC%9A%E9%9D%9E%E5%B8%B8%E5%BF%AB%EF%BC%8C%E5%A4%A7%E5%A4%A7%E5%87%8F%E5%B0%91%E6%97%B6%E9%97%B4%E5%92%8C%E7%A9%BA%E9%97%B4%E3%80%82%E8%80%8C%E4%B8%94 json %E7%9A%84 key %E9%80%9A%E5%B8%B8%E9%83%BD%E6%98%AF%E4%B8%8D%E5%8F%98%E7%9A%84%E3%80%82%E8%BF%99%E4%B8%AA%E5%9C%B0%E6%96%B9%E6%B2%A1%E6%9C%89%E8%80%83%E8%99%91%E5%88%B0%E5%A4%A7%E9%87%8F%E7%9A%84 json key %E5%A6%82%E6%9E%9C%E6%98%AF%E5%8F%98%E5%8C%96%E7%9A%84%EF%BC%8C%E9%82%A3%E5%B0%B1%E4%BC%9A%E7%BB%99%E5%AD%97%E7%AC%A6%E4%B8%B2%E5%B8%B8%E9%87%8F%E6%B1%A0%E5%B8%A6%E6%9D%A5%E5%BE%88%E5%A4%A7%E7%9A%84%E8%B4%9F%E6%8B%85%E3%80%82%0A%0A%E8%BF%99%E4%B8%AA%E9%97%AE%E9%A2%98 fastjson %E5%9C%A81.1.24%E7%89%88%E6%9C%AC%E4%B8%AD%E5%B7%B2%E7%BB%8F%E5%B0%86%E8%BF%99%E4%B8%AA%E6%BC%8F%E6%B4%9E%E4%BF%AE%E5%A4%8D%E4%BA%86%E3%80%82%E7%A8%8B%E5%BA%8F%E5%8A%A0%E5%85%A5%E4%BA%86%E4%B8%80%E4%B8%AA%E6%9C%80%E5%A4%A7%E7%9A%84%E7%BC%93%E5%AD%98%E5%A4%A7%E5%B0%8F%EF%BC%8C%E8%B6%85%E8%BF%87%E8%BF%99%E4%B8%AA%E5%A4%A7%E5%B0%8F%E5%90%8E%E5%B0%B1%E4%B8%8D%E4%BC%9A%E5%86%8D%E5%BE%80%E5%AD%97%E7%AC%A6%E4%B8%B2%E5%B8%B8%E9%87%8F%E6%B1%A0%E4%B8%AD%E6%94%BE%E4%BA%86%E3%80%82%0A%0A%5C%5B1.1.24%E7%89%88%E6%9C%AC%E7%9A%84%60com.alibaba.fastjson.parser.SymbolTable#addSymbol()%60%C2%A0Line:113%5C%5D%E4%BB%A3%E7%A0%81%0A%0A%7C     %7C     %7C%0A%7C --- %7C --- %7C%0A%7C 1%3Cbr%3E%3Cbr%3E2%3Cbr%3E%3Cbr%3E3%3Cbr%3E%3Cbr%3E4%3Cbr%3E%3Cbr%3E5 %7C %60public%60 %60static%60 %60final%60 %60int%60 %60MAX_SIZE%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0 =%60 %601024%60%60;%60%3Cbr%3E%3Cbr%3E%60if%60 %60(size %3E= MAX_SIZE) %7B%60%3Cbr%3E%3Cbr%3E%60return%60 %60new%60 %60String(buffer, offset, len);%60%3Cbr%3E%3Cbr%3E%60%7D%60 %7C%0A%0A%E8%BF%99%E4%B8%AA%E9%97%AE%E9%A2%98%E6%98%AF70w %E6%95%B0%E6%8D%AE%E9%87%8F%E6%97%B6%E5%80%99%E7%9A%84%E5%BC%95%E5%8F%91%E7%9A%84%EF%BC%8C%E5%A6%82%E6%9E%9C%E6%98%AF%E5%87%A0%E7%99%BE%E4%B8%87%E7%9A%84%E6%95%B0%E6%8D%AE%E9%87%8F%E7%9A%84%E8%AF%9D%E5%8F%AF%E8%83%BD%E5%B0%B1%E4%B8%8D%E5%8F%AA%E6%98%AF30ms %E7%9A%84%E9%97%AE%E9%A2%98%E4%BA%86%E3%80%82%E5%9B%A0%E6%AD%A4%E5%9C%A8%E4%BD%BF%E7%94%A8%E7%B3%BB%E7%BB%9F%E7%BA%A7%E6%8F%90%E4%BE%9B%E7%9A%84%60String#intern%60%E6%96%B9%E5%BC%8F%E4%B8%80%E5%AE%9A%E8%A6%81%E6%85%8E%E9%87%8D%EF%BC%81%0A%0A## %E4%BA%94.%E6%80%BB%E7%BB%93%0A%0A%E3%80%80%E3%80%80%E6%9C%AC%E6%96%87%E5%A4%A7%E4%BD%93%E7%9A%84%E6%8F%8F%E8%BF%B0%E4%BA%86%C2%A0%60String#intern%60%E5%92%8C%E5%AD%97%E7%AC%A6%E4%B8%B2%E5%B8%B8%E9%87%8F%E6%B1%A0%E7%9A%84%E6%97%A5%E5%B8%B8%E4%BD%BF%E7%94%A8%EF%BC%8Cjdk %E7%89%88%E6%9C%AC%E7%9A%84%E5%8F%98%E5%8C%96%E5%92%8C%60String#intern%60%E6%96%B9%E6%B3%95%E7%9A%84%E5%8C%BA%E5%88%AB%EF%BC%8C%E4%BB%A5%E5%8F%8A%E4%B8%8D%E6%81%B0%E5%BD%93%E4%BD%BF%E7%94%A8%E5%AF%BC%E8%87%B4%E7%9A%84%E5%8D%B1%E9%99%A9%E7%AD%89%E5%86%85%E5%AE%B9%EF%BC%8C%E8%AE%A9%E5%A4%A7%E5%AE%B6%E5%AF%B9%E7%B3%BB%E7%BB%9F%E7%BA%A7%E5%88%AB%E7%9A%84%C2%A0%60String#intern%60%E6%9C%89%E4%B8%80%E4%B8%AA%E6%AF%94%E8%BE%83%E6%B7%B1%E5%85%A5%E7%9A%84%E8%AE%A4%E8%AF%86%E3%80%82%E8%AE%A9%E6%88%91%E4%BB%AC%E5%9C%A8%E4%BD%BF%E7%94%A8%E5%92%8C%E6%8E%A5%E8%A7%A6%E5%AE%83%E7%9A%84%E6%97%B6%E5%80%99%E8%83%BD%E9%81%BF%E5%85%8D%E5%87%BA%E7%8E%B0%E4%B8%80%E4%BA%9B bug%EF%BC%8C%E5%A2%9E%E5%BC%BA%E7%B3%BB%E7%BB%9F%E7%9A%84%E5%81%A5%E5%A3%AE%E6%80%A7%E3%80%82\n"
metadata_diff: {"new":{"id":"a2f6621b59e44f919ec60bbe79854868","parent_id":"87b03a354016469baa363e5069da9311","latitude":"0.00000000","longitude":"0.00000000","altitude":"0.0000","author":"","source_url":"https://www.cnblogs.com/wxgblogs/p/5635099.html","is_todo":0,"todo_due":0,"todo_completed":0,"source":"joplin-desktop","source_application":"net.cozic.joplin-desktop","application_data":"","order":0,"user_updated_time":1587259608868,"markup_language":1,"is_shared":0},"deleted":[]}
encryption_cipher_text: 
encryption_applied: 0
updated_time: 2020-04-19T06:59:31.363Z
created_time: 2020-04-19T06:59:31.363Z
type_: 13